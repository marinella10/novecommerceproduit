!function(){return function t(e,i,n){function s(r,a){if(!i[r]){if(!e[r]){var d="function"==typeof require&&require;if(!a&&d)return d(r,!0);if(o)return o(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[r]={exports:{}};e[r][0].call(u.exports,function(t){var i=e[r][1][t];return s(i||t)},u,u.exports,t,e,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}}()({1:[function(t,e,i){"use strict";function n(t,e){var i="domain="+function(){for(var t="weird_get_top_level_domain=cookie",e=document.location.hostname.split("."),i=e.length-1;i>=0;i--){var n=e.slice(i).join(".");if(document.cookie=t+";domain=."+n+";",document.cookie.indexOf(t)>-1)return document.cookie=t.split("=")[0]+"=;domain=."+n+";expires=Thu, 01 Jan 1970 00:00:01 GMT;",n}}(),n="expires="+e;return document.cookie=[u+"="+t,"path=/",i,n].join("; "),n}function s(t){var e=void 0;try{e=function(){for(var t=u+"=",e=document.cookie.split(";"),i=0;i<e.length;i++){for(var n=e[i];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(t))return n.substring(t.length,n.length)}}();var i=JSON.parse(decodeURIComponent(e));if(i.businessUnitId===t)return i}catch(t){if(e){var n="domain="+window.location.hostname.replace(/^.*\.([^.]+\.[^.]+)/,"$1");document.cookie=u+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;"+n}}}function o(t){if(t){if(!t.expiry){t.expiry=new Date((new Date).getTime()+864e7).toUTCString()}return n(encodeURIComponent(JSON.stringify(t)),t.expiry)}}function r(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return e}var a=t("./constants.js").OFF,d=t("./xhr.js"),l="https:"===document.location.protocol?"https:":"http:",u="TrustboxSplitTest",c=function(t,e){if(!t||!t.groups)return null;for(var i=0,n=0,s=[],o=0;o<t.groups.length;o++)"number"==typeof t.groups[o].ratio&&(i+=t.groups[o].ratio,++n,s.push(t.groups[o]));if(0===n)return null;1===n&&i<1&&(s.push({name:a,ratio:1-i}),i=1);for(var d=0,l=Math.random()*i,u=s[0].name,c=[],p=0;p<s.length;p++)l>=d&&l<d+s[p].ratio&&(u=s[p].name),c.push(s[p].name),d+=s[p].ratio;return{allGroups:c,group:u,testId:t.testId,businessUnitId:e,session:r(),sessionStart:+new Date,anonymousId:r()}};e.exports={getABSettingsAsync:function(t,e){var i=s(t);return i&&(!i.sessionStart||+new Date<i.sessionStart+18e5)?void e(i,i.expiry):void d.xhrGet({url:l+"//widget.trustpilot.com/v1/ratios/"+t,success:function(n){var s=c(n,t);if(i&&i.testId===s.testId){i.session=r(),i.sessionStart=+new Date;var a=o(i);return e(i,a)}var d=o(s);return e(s,d)},error:function(){e(null)}})}}},{"./constants.js":3,"./xhr.js":7}],2:[function(t,e,i){"use strict";var n=function(t,e,i,n){t.removeEventListener?t.removeEventListener(e,i,n):t.removeEventListener&&t.detachEvent("on"+e,i)};e.exports=function(t,e,i,s){var o={element:t,type:e,options:s,removeEventListener:function(){n(this.element,this.type,this.listener,this.options)}};if(t.addEventListener)t.addEventListener(e,i,s),o.listener=i;else if(t.attachEvent){var r=function(t){(t=t||window.event).preventDefault=t.preventDefault||function(){t.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){t.cancelBubble=!0},i.call(void 0,t)};t.attachEvent("on"+e,r),o.listener=r}return o}},{}],3:[function(t,e,i){"use strict";e.exports={EMPTY_WIDGET_ID:"000000000000000000000000",OFF:"OFF"}},{}],4:[function(t,e,i){"use strict";function n(t){try{if(s)return;var e=document.createElement("script");e.setAttribute("type","application/ld+json"),e.innerHTML=JSON.stringify(t),document.head.appendChild(document.createComment("Added by Trustpilot")),document.head.appendChild(e),document.head.appendChild(document.createComment("/Added by Trustpilot")),s=!0}catch(t){}}var s=!1,o=t("./xhr.js"),r="https:"===document.location.protocol?"https:":"http:";e.exports=function(t){return!(s||(t.schemaType?(m=t.schemaType,f=t.businessunitId,g=t.locale,w=t.templateId,y=n,v=["type="+m,"url="+encodeURIComponent(window.location.href),"templateId="+w,"locale="+g].join("&"),b=r+"//widget.trustpilot.com/data/jsonld/business-unit/"+f+"?"+v,o.xhrGet({url:b,success:function(t){t.url=document.location.href,y(t)},error:function(t){console.error(t)}}),0):!t.name||!t.sku||(e=t.businessunitId,i=t.locale,a=t.templateId,d=t.name,l=t.sku,u=t.reviewnumber,c=n,p=i&&i.split("-")[0],h=r+"//widget.trustpilot.com"+("5763ba71ba484803e8b222ba"===a||"5763bccae0a06d08e809ecbb"===a?"/data/jsonld/business-unit/"+e+"/product-imported":"/data/jsonld/business-unit/"+e+"/product")+"?sku="+encodeURIComponent(l)+"&numberOfReviews="+(u||10)+"&productName="+d+"&language="+p+"&templateId="+a+"&url="+encodeURIComponent(window.location.origin+window.location.pathname),o.xhrGet({url:h,success:c,error:function(t){console.error(t)}}),0)));var e,i,a,d,l,u,c,p,h,m,f,g,w,y,v,b}},{"./xhr.js":7}],5:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t){if(void 0!==t.dataset)return t.dataset;if(t.attributes){for(var e={},i=0;i<t.attributes.length;i++){var n=t.attributes[i],s=n.name.match(/^data-(.+)$/i);if(s)e[s[1].replace(/(\-[a-z])/g,function(t){return t.toUpperCase().replace("-","")})]=n.value}return e}}function o(t){return t.getElementsByClassName("trustpilot-widget")}function r(t,e,i,n,s){this.window=t,this.document=e,this.ABSettings=n,this.Widget=i,this.widgets=[],this.stats={applied:0,findAndApplyCalls:0},this.version=s}Object.defineProperty(i,"__esModule",{value:!0});var a=n(t("./constants")),d=n(t("./addeventlistener")),l=n(t("./snippets")),u=a.default.OFF,c=a.default.EMPTY_WIDGET_ID;r.prototype.initializeOnPageLoad=function(){var t=this;"loading"!==this.document.readyState?this.findAndApplyWidgets():this.document.addEventListener("DOMContentLoaded",function(){t.findAndApplyWidgets()})},r.prototype.applyWidgetFromDomElement=function(t,e){var i=t.firstChild&&"IFRAME"===t.firstChild.tagName;if(!i||e){var n=s(t),o=[t],r=[n];if(i||(0,l.default)(n),this.removeWidgets(o),"group"in n){var a=n.businessunitId;this.stats.needABSettings=a;var d=this;this.ABSettings.getABSettingsAsync(a,function(t,e){var i=d.applyWidgets(o,r,t,e);d.stats.applyFromDomCalls=1+(0|d.stats.applyFromDomCalls),d.setupViewTracking(i)})}else{var u=this.applyWidgets(o,r);this.stats.applyFromDomCalls=1+(0|this.stats.applyFromDomCalls),this.setupViewTracking(u)}}},r.prototype.findAndApplyWidgets=function(){this.stats.findAndApplyCalls+=1;var t=function(t){for(var e=o(t),i=[],n=0;n<e.length;n++)i.push(s(e[n]));return{elements:e,datasets:i}}(this.document),e=t.elements,i=t.datasets,n=null;if(e&&!(e.length<1)){this.removeWidgets(t.elements);for(var r=[],a=[],d=[],u=[],c=0;c<i.length;c++)(0,l.default)(i[c]),"group"in i[c]?(d.push(e[c]),u.push(i[c]),n=i[c].businessunitId):(r.push(e[c]),a.push(i[c]));if(this.stats.normalElements=r.length,this.stats.abTestElements=d.length,r.length>0){var p=this.applyWidgets(r,a);this.stats.normalApplied=p.length,this.setupViewTracking(p)}if(d.length>0){this.stats.needABSettings=n;var h=this;this.ABSettings.getABSettingsAsync(n,function(t,e){var i=h.applyWidgets(d,u,t,e);h.setupViewTracking(i)})}}},r.prototype.applyWidgets=function(t,e,i,n){for(var s=i&&i.session,o=i&&i.anonymousId,r=i&&i.testId,a=[],d=0;d<t.length;d++)if(this.checkWidgetDisplayAndUpdateDataset(i,e[d])){var l=new this.Widget(t[d],e[d],s,o,r,n);this.stats.applied+=1,this.widgets.push(l),a.push(l)}return a},r.prototype.checkWidgetDisplayAndUpdateDataset=function(t,e){return!(t&&"group"in e)||t.group===e.group||t.group===u&&(e.templateId=c,e.styleHeight="0",e.group=u,!0)},r.prototype.removeWidgets=function(t){t=void 0===t?o(this.document):t;for(var e=0;e<t.length;++e)for(;t[e].firstChild;)t[e].removeChild(t[e].firstChild)},r.prototype.setupViewTracking=function(t){if(this.widgetViews)this.widgetViews=this.widgetViews.concat(t);else{this.widgetViews=t.slice();var e=(o=function(){for(var t=this.widgetViews.length-1;t>=0;t--){var e=this.widgetViews[t],i=e.templateId===c,o=i;i||(o=e.trackVisibility()),o&&this.widgetViews.splice(t,1)}0===this.widgetViews.length&&(n.removeEventListener(),s.removeEventListener())},r=100,a=this,l=void 0,function(){var t=arguments;clearTimeout(l),l=setTimeout(function(){l=null,o.apply(a,t)},r)}),i={passive:!0,capture:!1},n=(0,d.default)(window,"scroll",e,i),s=(0,d.default)(window,"resize",e,i);e()}var o,r,a,l},i.default=r},{"./addeventlistener":2,"./constants":3,"./snippets":4}],6:[function(t,e,i){"use strict";function n(t){var e="";return(t=t.toLowerCase())&&t.length>0&&(e=/(px|\%)/i.test(t)?t:t+"px"),e}function s(t,e,i,s,r,u){if(!t)throw"No container supplied for TrustBox";if(!e)throw"No dataset supplied for TrustBox";if(!e.templateId)throw"No templateId supplied for TrustBox";if(!e.businessunitId)throw"No businessunitId supplied for TrustBox";if(!e.locale)throw"No locale supplied for TrustBox";this.id=function t(){var e=Math.random();return t[e]?t():(t[e]=!0,e)}(),this.templateId=e.templateId,this.session=i,this.group=e.group,this.sessionExpiry=u,this.anonymousId=s,this.testId=r,this.container=t,this.iframes={},this.stats={createIFrameCalls:0,iframeLoadEvents:0,events:{}},this.baseUrl=d+"/"+e.templateId+"/",this.queryString=this.createQueryStringFromDataSet(e),this.hasSentImpression=!1,this.container.style.position="relative",this.options={source:o,frameBorder:0,allowTransparency:"true",scrolling:"no",styles:{borderStyle:"none",backgroundColor:"transparent",display:"block",overflow:"hidden",height:n(e.styleHeight),width:n(e.styleWidth),position:"relative"},show:!0},this.createIFrame("main",this.options);var c=this;l(window,"message",function(t){if(t.origin===a&&"string"==typeof t.data){var e=void 0;try{e=JSON.parse(t.data)}catch(e){return void console.log("Invalid data sent on widget: "+t.data)}if(e.widgetId===c.id){var i={data:e,origin:t.origin};c.widgetIframeMessageHandler(i)}}},!1)}var o="index.html",r="https:"===document.location.protocol?"https:":"http:",a=r+"//widget.trustpilot.com",d=r+"//widget.trustpilot.com/trustboxes",l=t("./addeventlistener.js");s.prototype={widgetIframeMessageHandler:function(t){switch(this.stats.events[t.data.command]=(this.stats.events[t.data.command]||0)+1,t.data.command){case"createIFrame":this.createIFrame(t.data.name,t.data);break;case"setStyle":this.setStyle(t.data.name,t.data.style);break;case"loaded":this.sendLoadedToMainFrame();break;case"message":this.sendMessage(this.iframes[t.data.name],t.data);break;case"resize-height":this.resizeHeight(t.data.name,t.data.height);break;case"impression":if(this.hasSentImpression)return;this.hasSentImpression=!0;var e=this.getTrackingData("impression-received");this.sendMessage(this.iframes.main,e),this.trackVisibility()}},getTrackingData:function(t){var e={command:t,url:window.document.URL,referrer:window.document.referrer,userAgent:window.navigator.userAgent,language:window.navigator.userLanguage||window.navigator.language,platform:window.navigator.platform};return this.session&&this.group&&(e.session=this.session,e.sessionExpiry=this.sessionExpiry),this.anonymousId&&(e.anonymousId=this.anonymousId),this.testId&&(e.testId=this.testId),e},createQueryStringFromDataSet:function(t){var e="?";for(var i in t)e+=i+"="+encodeURIComponent(t[i])+"&";return e.replace(/(\&|\?)+$/,"")},createIFrame:function(t,e){this.stats.createIFrameCalls+=1;var i,n,s,o,r,a,d,u=(s=e,o=this.options,r=this.baseUrl,a=this.queryString,(d=o||{}).position=s.styles.position||"",d.zindex=s.styles.zindex||"",d.margin=s.styles.margin||"",d.top=s.styles.top||"",d.bottom=s.styles.bottom||"",d.left=s.styles.left||"",d.right=s.styles.right||"",d.height=s.styles.height||"",d.width=s.styles.width||o.styles.width||"",d.display=s.show?"block":"none",d.src=r+s.source+a,d.borderStyle=o.styles.borderStyle,d.overflow=o.styles.overflow,i=d,(n=document.createElement("iframe")).style.position=i.position,n.style.zIndex=i.zindex,n.style.margin=i.margin,n.style.top=i.top,n.style.bottom=i.bottom,n.style.left=i.left,n.style.right=i.right,n.style.height=i.height,n.style.width=i.width,n.style.borderStyle=i.borderStyle,n.style.backgroundColor=i.backgroundColor,n.style.display=i.display,n.style.overflow=i.overflow,n.frameBorder=i.frameBorder,n.scrolling=i.scrolling,n.allowTransparency=i.allowTransparency,n.title="Customer reviews powered by Trustpilot",n.src=i.src,n),c=this;this.iframes[t]=u,this.container.appendChild(u),l(u,"load",function(){c.setWidgetId(u),c.stats.iframeLoadEvents+=1})},setStyle:function(t,e){var i=this.iframes[t]||this.iframes.main;for(var n in e)i.style[n]=e[n]},sendLoadedToMainFrame:function(){this.sendMessage(this.iframes.main,"loaded")},resizeHeight:function(t,e){if("number"==typeof e&&0!==e){var i=this.iframes[t]||this.iframes.main;i&&(i.style.height=e+"px")}},sendMessage:function(t,e){t.contentWindow&&(e=JSON.stringify(e),t.contentWindow.postMessage(e,a))},setWidgetId:function(t){this.sendMessage(t,{command:"setId",widgetId:this.id})},sendVisibilityData:function(){if(!this.hasSentViewTracking){this.hasSentViewTracking=!0;var t=this.getTrackingData("trustbox-in-viewport");this.sendMessage(this.iframes.main,t)}},trackVisibility:function(){if(this.hasSentViewTracking)return!0;if(this.hasBeenVisible)return this.hasSentImpression&&this.sendVisibilityData(),!0;return!!this.isInViewport(.5)&&(this.hasSentImpression?(this.sendVisibilityData(),!0):(this.hasBeenVisible=!0,!0))},isInViewport:function(t){var e=this.iframes.main.getBoundingClientRect(),i=e.width||this.iframes.main.offsetWidth,n=e.height||this.iframes.main.offsetHeight;return e.top>=0&&e.left>=0&&e.bottom-n*t<=(window.innerHeight||document.documentElement.clientHeight)&&e.right-i*t<=(window.innerWidth||document.documentElement.clientWidth)}},e.exports=s},{"./addeventlistener.js":2}],7:[function(t,e,i){"use strict";function n(t){try{return JSON.parse(t.responseText)}catch(e){return t.responseText}}e.exports={xhrGet:function(t){var e=new window.XMLHttpRequest;e.open("GET",t.url,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onreadystatechange=function(){4===e.readyState&&(e.status>=200&&e.status<300?t.success(n(e)):t.error&&t.error(n(e)))},e.send()}}},{}],8:[function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(e){try{i=t("./lib/widget.js"),s=t("./lib/ab-settings.js"),o=t("./lib/widget-management.js").default,window.Trustpilot=window.Trustpilot||{loadFromElement:function(t,e){return this.Modules.WidgetManagement&&this.Modules.WidgetManagement.applyWidgetFromDomElement(t,e)}},window.Trustpilot.Modules=window.Trustpilot.Modules||{},window.Trustpilot.Modules.WidgetManagement?window.Trustpilot.Modules.WidgetManagement.version!==e&&console.log("Detected legacy TrustBox bootstrap with version:",window.Trustpilot.Modules.WidgetManagement.version,", current:",e):(window.Trustpilot.Modules.WidgetManagement=new o(window,document,i,s,e),window.Trustpilot.Modules.WidgetManagement.initializeOnPageLoad())}catch(t){!function(){try{!function(t){console.error("Error on bootstrap:"+t);var i=["error="+encodeURIComponent(t),"uri="+encodeURIComponent(document.URL),"bootstrapVersion="+e].join("&");document.createElement("img").src="//widget.trustpilot.com/feedback/report-error?"+i}("object"===(void 0===t?"undefined":n(t))?t.message:t)}catch(t){console.error("Error on error reporting method:"+t)}}()}var i,s,o}("1.197.1")},{"./lib/ab-settings.js":1,"./lib/widget-management.js":5,"./lib/widget.js":6}]},{},[8]);